<HTML>
<HEAD>
    <style>

/*        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: auto;  

        }*/
        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
            overflow:auto;
        }

        .table {
            flex: 8; /* chiếm 80% chiều cao */
            background: lightyellow;
            overflow-y: auto;
            border : 1px solid #000000; 
        }

        .control {
            flex: 1; /* chiếm 20% chiều cao */
            background: lightgray;
            display: flex;
        }
        button{
            flex :1;
        }

        .selected{
            background-color : green;
        }


 </style>
 </HEAD>
<BODY ID=CBai2Dlg BGCOLOR=white style="font-family:MS Shell Dlg;font-size:8">
    <div id="table">
        <table border="1" width="100%" >
            <tr>
                <th>ID</th>
                <th>Account</th>
                <th>HoTen</th>
                <th>QueQuan</th>
                <th>NgaySinh</th>
                <th>GioiTinh</th>
                <th>TruongHoc</th>
                <th>SoDienThoai</th>
            </tr>
        </table>
    </div>

    <div id="control">
        <button type="button" id="add" >Add</button>
        <button type="button" id="edit">Edit</button>
        <button type="button" id="remove">Remove</button>
    </div>
    <script>
        if (!window.JSON) {
            window.JSON = {
                parse: function (s) { return eval('(' + s + ')'); },
                stringify: function (obj) {
                    var t = typeof obj;
                    if (t != "object" || obj === null) {
                        // simple value
                        if (t == "string") obj = '"' + obj + '"';
                        return String(obj);
                    } else {
                        // array or object
                        var json = [], isArray = (obj && obj.constructor == Array);
                        for (var n in obj) {
                            var v = obj[n]; t = typeof v;
                            if (t == "string") v = '"' + v + '"';
                            else if (t == "object" && v !== null) v = JSON.stringify(v);
                            json.push((isArray ? "" : '"' + n + '":') + String(v));
                        }
                        return (isArray ? "[" : "{") + String(json) + (isArray ? "]" : "}");
                    }
                }
            };
        }
        function onAdd(param) {
            var array = JSON.parse(param);

            var table = document.getElementById('table');
            var newRow = table.insertRow(-1); // thêm vào cuối bảng

            for (var i = 0; i < 8; i++) {
                var newCell = newRow.insertCell(-1);
                newCell.innerText = array[i]; // IE8 không hỗ trợ innerText trên tất cả element
            }

            newRow.onclick = function () {
                var className = this.className;

                if (className.indexOf('selected') === -1) {
                    this.className += ' selected';
                } else {
                    // loại bỏ 'selected' và các khoảng trắng dư thừa
                    this.className = className.replace('selected', '');
                }
            };
        }


        function onRemove(temp) {
            var array = JSON.parse(temp); // đảm bảo là mảng thực
            array.sort(function (a, b) { return b - a; });
            var table = document.getElementById('table');

            // Sắp xếp giảm dần để xóa từ dòng lớn đến nhỏ

            for (var i = 0; i < array.length; i++) {
                if (array[i] >= 0 && array[i] < table.rows.length) {
                    table.deleteRow(array[i]);
                }
            }
        }
        function getRecordSelected() {
            var selected = [];
            var table = document.getElementById('table');
            for (var i = 0; i < table.rows.length; i++) {

                if (table.rows[i].className.indexOf('selected') !== -1) {
                    selected.push(i);
                }
            }
            return JSON.stringify(selected);
        }
        function getRecord(index) {
            var ret = [];
            var table = document.getElementById('table');
            for (var i = 0; i < table.rows[index].cells.length; i++) { // Lặp qua từng cột của dòng index
                ret.push(table.rows[index].cells[i].innerText);
            }
            return JSON.stringify(ret);
        }
        window.onload = function () {
            //var table = document.getElementById('table');
            //for (var i = 1; i < table.rows.length; i++) {
            //    table.rows[i].onclick = function () {
            //        // Kiểm tra nếu có class 'selected'
            //        var className = this.className;
            //        if (className.indexOf('selected') === -1) {
            //            this.className += ' selected';
            //        } else {
            //            this.className = className.replace('selected', '');
            //        }
            //    };
            //}
        };
    </script>
</BODY>
</HTML>
