<HTML>
<head>
    <style>
        #day{
            width : 70px ;
        }
    </style>
</head>
<BODY ID=$class_name$ BGCOLOR=WHITE>
    <label for="account">Account</label>
    <input type="text" id="account" /> </br>

    <label for="hoten">HoTen</label>
    <input type="text" id="hoten" /> </br>

    <label for="quequan">QueQuan</label>
    <input type="text" id="quequan" /> </br>

    <label for="gioitinh">GioiTinh</label>
    <select id="gioitinh">
        <option>Nam</option>
        <option>Nữ</option>
    </select>
    <br/>

    <label>NgaySinh</label>
    <select id="day">
    </select>
    <select id="month">
    </select>
    <select id="year">
    </select>
    <br/>



    <label for="truonghoc">TruongHoc</label>
    <input type="text" id="truonghoc" /> </br>

    <label for="sodienthoai">SoDienThoai</label>
    <input type="text" id="sodienthoai" /> </br>

    <button type="button" id="okButton">OK</button>
    <script>
        if (!window.JSON) {
            window.JSON = {
                parse: function (s) { return eval('(' + s + ')'); },
                stringify: function (obj) {
                    var t = typeof obj;
                    if (t != "object" || obj === null) {
                        // simple value
                        if (t == "string") obj = '"' + obj + '"';
                        return String(obj);
                    } else {
                        // array or object
                        var json = [], isArray = (obj && obj.constructor == Array);
                        for (var n in obj) {
                            var v = obj[n]; t = typeof v;
                            if (t == "string") v = '"' + v + '"';
                            else if (t == "object" && v !== null) v = JSON.stringify(v);
                            json.push((isArray ? "" : '"' + n + '":') + String(v));
                        }
                        return (isArray ? "[" : "{") + String(json) + (isArray ? "]" : "}");
                    }
                }
            };
        }

        function onOk() {
            var ret = [];
            var account = document.getElementById("account").value;
            var hoten = document.getElementById("hoten").value;
            var quequan = document.getElementById("quequan").value;
            var ngaysinh = document.getElementById("year").value
                + '/' + (document.getElementById("month").value < 10 ? "0" + document.getElementById("month").value : document.getElementById("month")) 
                + '/' + (document.getElementById("day").value < 10 ? "0" + document.getElementById("day").value : document.getElementById("day")) 
            var gioitinh = document.getElementById("gioitinh").value;
            var truonghoc = document.getElementById("truonghoc").value;
            var sodienthoai = document.getElementById("sodienthoai").value;

        
            var noti = "";
            if (!account) {
                noti += "Account, ";
            }

            if (!quequan) {
                noti += "QueQuan, ";
            }

            if (!hoten) {
                noti += "HoTen, ";
            }

            if (!sodienthoai) {
                noti += "SoDienThoai ";
            }
            noti += "không được bỏ trống!";
            if (noti != "không được bỏ trống!") {
                return noti;
            } else if ((noti = CheckNumberPhone(sodienthoai)) != "") {
                return noti;
            }
            else {
                ret.push(account);
                ret.push(hoten);
                ret.push(quequan);
                ret.push(ngaysinh);
                ret.push(gioitinh);
                ret.push(truonghoc);
                ret.push(sodienthoai);
                for (var i = 0; i < ret.length; i++) {
                    alert(ret[i]);
                }
                return JSON.stringify(ret);
            }

        }
        function CheckNumberPhone(SoDienThoai) {
            if (SoDienThoai.length != 10 && SoDienThoai.length != 11) {
                return "Chiều dài số điện thoại không hợp lệ";
            }

            var vec = ["0", "84", "+84"];
            var check = false;
            for (var i = 0; i <= 2; i++) {
                if (vec[i] == SoDienThoai.substring(0, i + 1))
                    check = true;
            }
            if (!check) return "Sai định dạng số điện thoại";
            var tmp = SoDienThoai.substring(1);
            for (var i = 0; i < tmp.length; i++) {
                if (tmp[i] < "0" || tmp[i] > "9")
                    return "Số điện thoại chứa kí tự không hợp lệ";
            }

            return "";
        }
        function onInit(str) {

            var arr = JSON.parse(str); 
            document.getElementById("account").value = arr[2];
            document.getElementById("hoten").value = arr[3];
            document.getElementById("quequan").value = arr[4];
            //document.getElementById("ngaysinh").value = arr[5];
            document.getElementById("gioitinh").value = arr[6];
            document.getElementById("truonghoc").value = arr[7];
            document.getElementById("sodienthoai").value = arr[8];

        }
        window.onload = function (){
            var daySelect = document.getElementById('day');
            var monthSelect = document.getElementById('month');
            var yearSelect = document.getElementById('year');

            // Vòng lặp điền giá trị cho Ngày (1-31)
            for (var i = 1; i <= 31; i++) {
                var option = document.createElement('option');
                //option.textContent = i;
                option.innerText = i;
                option.value = i;
                daySelect.appendChild(option);
            }

            // Vòng lặp điền giá trị cho Tháng (1-12)
            for (var i = 1; i <= 12; i++) {
                var option = document.createElement('option');
                //option.textContent = i;
                option.value = i;
                option.innerText = i;

                monthSelect.appendChild(option);
            }


            for (var i = 2000; i <= 2100; i++) {
                var option = document.createElement('option');
                //option.textContent = i;
                option.value = i;
                option.innerText = i;

                yearSelect.appendChild(option);
            }
        }
        </script>


</BODY>
</HTML>
